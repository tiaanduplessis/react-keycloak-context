import e,{Component as t,createContext as o}from"react";var n=o(null),r=function(t){function o(){for(var e=this,o=[],n=arguments.length;n--;)o[n]=arguments[n];t.apply(this,o),this.state={kc:{loading:!0}},this.handleSetupKeycloak=function(t){var o=e.props,n=o.initOptions,r=o.refreshTokenKey,i=o.tokenKey,s=o.onInit,c=o.storage;void 0===c&&(c=window.localStorage);var p=t.default(o.config),a=c.getItem(i),u=c.getItem(r);return a&&"undefined"!==a&&u&&"undefined"!==u&&(n.token=a,n.refreshToken=u),p.init(n).then(function(t){c.setItem(i,p.token),c.setItem(r,p.refreshToken),s(p),e.setState({kc:p})})}}return t&&(o.__proto__=t),(o.prototype=Object.create(t&&t.prototype)).constructor=o,o.prototype.componentDidMount=function(){import("keycloak-js").then(this.handleSetupKeycloak).catch(this.props.onError)},o.prototype.render=function(){return e.createElement(n.Provider,{value:this.state.kc},this.props.children)},o}(t);r.defaultProps={onError:console.error,onInit:function(){},config:{},initOptions:{onLoad:"login-required",promiseType:"native"},refreshTokenKey:"kc_refreshToken",tokenKey:"kc_token"};var i=r,s=n.Consumer;export{i as Provider,s as Consumer};
